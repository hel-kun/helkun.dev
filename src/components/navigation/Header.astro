---
import HeaderLink from '@/components/navigation/HeaderLink.astro';
import HamburgerMenuContent from '@/components/navigation/HamburgerMenuContent.astro';

import Logo from '@/components/svg/Logo.astro';
---
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let isActive = false;
        const button = document.querySelector('#menuButton');
        const menuContent = document.querySelector('#menuContent');

        button?.addEventListener('click', function(){
            button.classList.toggle("hamburger-button-toggle");
            if(isActive==false){
                isActive = true;
                menuContent?.classList.remove('hidden');
                menuContent?.classList.add('fixed');
            }
            else{
                isActive=false;
                menuContent?.classList.remove('fixed');
                menuContent?.classList.add('hidden');
            }
        }); 
    });
</script>

<header class="fixed w-full">
    <div class="w-full bg-gray-800 text-white">
        <nav class="container mx-auto px-6 py-2 flex flex-wrap items-center justify-between">
            <a class="font-bold text-2xl order-first flex items-center" href="/">
                <Logo />
                <h2>へる破壊財団</h2>
            </a>
            <div class="order-last items-center flex">
                <div class="w-full sm:w-auto px-6 sm:px-4 py-2 sm:py-0 sm:flex hidden text-xl">
                    <HeaderLink class="block sm:inline-block mt-4 sm:mt-0 mr-6 hover:text-yellow-500 [&.active]:text-yellow-500 [&.active]:font-bold" href="/">Home</HeaderLink>
                    <HeaderLink class="block sm:inline-block mt-4 sm:mt-0 mr-6 hover:text-yellow-500 [&.active]:text-yellow-500 [&.active]:font-bold" href="/works">Works</HeaderLink>
                    <HeaderLink class="block sm:inline-block mt-4 sm:mt-0 mr-6 hover:text-yellow-500 [&.active]:text-yellow-500 [&.active]:font-bold" href="/blog">Blog</HeaderLink>
                    <HeaderLink class="block sm:inline-block mt-4 sm:mt-0 mr-6 hover:text-yellow-500 [&.active]:text-yellow-500 [&.active]:font-bold" href="/links">Links</HeaderLink>
                </div>
                <div>
                    <button id="menuButton" class="flex flex-col justify-center items-center w-8 h-8 hover:bg-gray-600">
                        <span id="before" class="block w-6 h-1 rounded-full bg-white transition-all duration-150 -translate-y-1"></span>
                        <span id="center" class="block w-6 h-1 rounded-full bg-white transition-all duration-150"></span>
                        <span id="after" class="block w-6 h-1 rounded-full bg-white transition-all duration-150 translate-y-1"></span>
                    </button>
                </div>
            </div>
        </nav>
    </div>
    <div id="menuContent" class="hidden w-1/2 sm:w-1/3 sm:left-2/3 h-screen left-1/2 bg-opacity-90 bg-gray-800 text-white z-50">
        <HamburgerMenuContent/>
    </div>
</header>

<style is:global>
    .hamburger-button-toggle{
        span{
            @apply bg-white;
        }
        #before{
            @apply rotate-45 translate-y-0.5
        }
        #center{
            @apply h-0
        }
        #after{
            @apply -rotate-45 -translate-y-0.5
        }
    }
</style>